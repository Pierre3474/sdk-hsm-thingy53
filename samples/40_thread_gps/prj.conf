#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
#

# —— Application features ——
CONFIG_APP_BATTERY=y
CONFIG_APP_LED=y
CONFIG_APP_OT=y
CONFIG_UDP_BROADCAST=y

# —— Persist flash state ——
CONFIG_APP_FLASH=y
CONFIG_FLASH=y
CONFIG_MPU_ALLOW_FLASH_WRITE=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_SOC_FLASH_NRF_EMULATE_ONE_BYTE_WRITE_ACCESS=y

# —— Hardware dependencies ——
CONFIG_PWM=y
CONFIG_GPIO=y
CONFIG_ADC=y

# —— Bus et capteurs ——
CONFIG_I2C=y
CONFIG_SENSOR=y
CONFIG_BMI270=y                # Bosch BMI270 IMU
CONFIG_BH1749=y                # Rohm BH1749 light sensor
CONFIG_BME688=n
CONFIG_BME688_SERVER=n
CONFIG_BME688_BSEC2=n

# —— Networking (Thread over UDP) ——
CONFIG_NETWORKING=y
CONFIG_NET_L2_OPENTHREAD=y
CONFIG_NET_IPV6=y
CONFIG_NET_CONFIG_NEED_IPV6=y
CONFIG_NET_SOCKETS=y
CONFIG_NET_SOCKETS_POLL_MAX=5
CONFIG_NET_SOCKETS_POSIX_NAMES=y

CONFIG_OPENTHREAD_NORDIC_LIBRARY_MASTER=y
CONFIG_OPENTHREAD_FTD=y
CONFIG_OPENTHREAD_MANUAL_START=n
CONFIG_OPENTHREAD_JOINER=y
CONFIG_OPENTHREAD_JOINER_AUTOSTART=y
CONFIG_OPENTHREAD_JOINER_PSKD="ABCDE2"

# —— Fixed Thread network ——
CONFIG_OPENTHREAD_NETWORK_NAME="FarmRobotics"
CONFIG_OPENTHREAD_PANID=0x1234

# —— Shell CLI (UART) ——
CONFIG_SHELL=y
CONFIG_SHELL_BACKEND_SERIAL=y
CONFIG_SHELL_HISTORY=y
CONFIG_OPENTHREAD_CLI=y         # Expose ot> commands in shell

# —— C++ support ——
CONFIG_CPLUSPLUS=y
CONFIG_LIB_CPLUSPLUS=y
CONFIG_NEWLIB_LIBC=y
CONFIG_NEWLIB_LIBC_NANO=n
CONFIG_EXCEPTIONS=y
CONFIG_STD_CPP17=y

# —— Stack & optimisations ——
CONFIG_MAIN_STACK_SIZE=8192
CONFIG_COMPILER_OPT="-Wno-psabi"
CONFIG_NEWLIB_LIBC_FLOAT_PRINTF=y
